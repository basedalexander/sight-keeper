!function t(e,n,i){function o(r,u){if(!n[r]){if(!e[r]){var a="function"==typeof require&&require;if(!u&&a)return a(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return o(n?n:t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){"use strict";function i(){"on"===x.load()?o():s()}function o(){u(),d(),f(),O.send("sessionStarted"),E.enableIcon()}function s(){x.save("off"),R.timeoutId&&I(),p(),O.send("sessionEnded"),g(),O.send("idleInded"),a(),l(),E.disableIcon(),k.stop(),P.closeAll()}function r(t){var e=A.isRunning(),n=T.isRunning(),i=A.isPaused();"off"!==x.load()&&("idle"===t&&(n&&y(),n||e||(h(),O.send("idleStarted")),i&&(h(),O.send("idleStarted")),O.send("idle")),"active"===t&&(n&&I(),e&&(v(),P.idleInterrupted(),k.play(1),O.send("idleEnded")),e||n||(P.closeIdleEnded(),f(),O.send("sessionStarted")),O.send("active")))}function u(){chrome.idle.onStateChanged.addListener(r)}function a(){chrome.idle.onStateChanged.removeListener(r)}function c(t,e){chrome.notifications.clear(t,function(){}),"sessionEnd"===t&&(0===e?f():f(3e5)),"idleInterrupted"===t&&0===e&&(g(),f()),O.send("sessionStarted")}function d(){chrome.notifications.onButtonClicked.addListener(c)}function l(){chrome.notifications.onButtonClicked.removeListener(c)}function f(t){var e=t||+T.period.load();T.status.save("running"),T.startDate.save(Date.now()),T.timerId=setTimeout(function(){w()?k.play(1):(P.sessionEnded(),k.play(1)),p()},e)}function p(){clearTimeout(T.timerId),T.timerId=null,T.status.reset(),T.startDate.reset(),O.send("sessionEnded"),w()&&(I(),h(),O.send("idleStarted"))}function m(){k.stop(),P.closeAll(),p(),f()}function h(t){var e=t||+A.period.load();A.status.save("running"),A.startDate.save(Date.now()),A.timerId=setTimeout(function(){g(),P.idleEnded(),k.play(3),O.send("idleEnded")},e)}function g(){clearTimeout(A.timerId),A.timerId=null,A.status.reset(),A.startDate.reset()}function v(){g(),A.status.save("paused")}function y(){var t=A.period.load();R.startDate=Date.now(),O.send("afk",R.startDate),R.timeoutId=setTimeout(function(){I(),p(),O.send("sessionEnded")},t)}function I(){O.send("notAfk"),clearTimeout(R.timeoutId),R.timeoutId=null,R.startDate=null}function w(){return!!R.timeoutId}function S(){O.on("state",function(t){return t.value?(x.save(t.value),void i()):x.load()}),O.on("sessionRestart",function(t){return m(),1}),O.on("session.period",function(t){T.setPeriod(t.value),p(),O.send("sessionEnded"),g(),O.send("idleInded"),f(),O.send("sessionStarted")}),O.on("idle.period",function(t){A.setPeriod(t.value)}),O.on("mute",function(){k.setVolume(0)}),O.on("unmute",function(){k.setVolume(1)}),this.switchOn=o,this.switchOff=s,i()}var j=t("./Static.js"),D=t("./Period.js"),b=t("./Router.js"),E=t("./badger.js"),P=(t("./utils.js"),t("./notify.js")),k=t("./audio.js"),x=new j("state","on"),T=new D("session","60000"),A=new D("idle","30000"),O=new b("backend"),R={timeoutId:null,startDate:null};chrome.idle.setDetectionInterval(15),e.exports=S},{"./Period.js":2,"./Router.js":3,"./Static.js":4,"./audio.js":6,"./badger.js":7,"./notify.js":8,"./utils.js":9}],2:[function(t,e,n){"use strict";function i(t,e){this.status=new o(t+".status","stopped"),this.period=new o(t+".period",e),this.startDate=new o(t+".startDate","0"),this.status.reset(),this.startDate.reset(),this.timeoutId=null}var o=t("./Static.js");i.prototype.isRunning=function(){return"running"===this.getStatus()},i.prototype.isPaused=function(){return"paused"===this.getStatus()},i.prototype.setStatus=function(t){return this.status.save(t)},i.prototype.getStatus=function(){return this.status.load()},i.prototype.resetStatus=function(){return this.status.reset()},i.prototype.setPeriod=function(t){return this.period.save(t)},i.prototype.getPeriod=function(){return this.period.load()},i.prototype.resetPeriod=function(){return this.period.reset()},i.prototype.setStartDate=function(){return this.startDate.save(Date.now())},i.prototype.getStartDate=function(){return this.startDate.load()},i.prototype.resetStartDate=function(){return this.startDate.reset()},e.exports=i},{"./Static.js":4}],3:[function(t,e,n){"use strict";function i(t){function e(t,e,n){chrome.runtime.sendMessage({id:i,name:t,value:e},n)}function n(t,e){this[t]=function(n,o,s){n.id!==i&&n.name===t&&s(e(n))},chrome.runtime.onMessage.addListener(this[t])}var i=t;this.send=e,this.on=n}e.exports=i},{}],4:[function(t,e,n){"use strict";function i(t,e){var n,i;for(n in e)e.hasOwnProperty(n)&&(i=e[n],i.configurable=!0,i.writable=!0);Object.defineProperties(t.prototype,e)}function o(t,e){this.name=t,this.defaultValue=e,this.load()}i(o,{reset:{value:function(){return this.save(this.defaultValue)}},load:{value:function(){var t=window.localStorage.getItem(this.name);return null!==t?t:this.reset()}},save:{value:function(t){return window.localStorage.setItem(this.name,t),this.load()}}}),e.exports=o},{}],5:[function(t,e,n){"use strict";var i=t("./Engine.js");new i},{"./Engine.js":1}],6:[function(t,e,n){"use strict";function i(t){u.src="audio/"+t+".ogg",u.volume=a.load(),u.play()}function o(){u.src=""}function s(t){a.save(t)}var r=t("./Static.js"),u=new Audio(""),a=new r("volume","1");document.body.appendChild(u),n.play=i,n.stop=o,n.setVolume=s},{"./Static.js":4}],7:[function(t,e,n){"use strict";n.disableIcon=function(){chrome.browserAction.setIcon({path:"../img/eye-icon-off-19.png"},function(){})},n.enableIcon=function(){chrome.browserAction.setIcon({path:"../img/eye-icon-on-19.png"},function(){})}},{}],8:[function(t,e,n){"use strict";function i(){chrome.notifications.create("sessionEnd",c,function(t){setTimeout(function(){chrome.notifications.clear(t,function(){})},23e3)})}function o(){a=new Notification("Good job!",l)}function s(){a&&(a.close(),a=null)}function r(){chrome.notifications.create("idleInterrupted",d,function(t){setTimeout(function(){chrome.notifications.clear(t,function(){})},7e3)})}function u(){chrome.notifications.clear("sessionEnd",function(){}),chrome.notifications.clear("idleProgress",function(){}),chrome.notifications.clear("idlePaused",function(){}),s()}var a,c={type:"basic",iconUrl:"../img/eye128.jpg",title:"Take a break!",message:"Do not touch the computer whole the rest period",contextMessage:"Sight keeper ",priority:2,buttons:[{title:"SKIP",iconUrl:"../img/ignore_ico.jpg"},{title:"Remind in 5 minutes",iconUrl:"../img/remind_ico.jpg"}]},d={type:"basic",iconUrl:"../img/eye128.jpg",title:"Take a break!",message:"Do not touch the computer whole the rest period",contextMessage:"Sight keeper",priority:2,buttons:[{title:"SKIP idle",iconUrl:"../img/ignore_ico.jpg"}]},l={body:"Now you can proceed",icon:"../img/eye48.png"};n.sessionEnded=i,n.idleEnded=o,n.closeIdleEnded=s,n.idleInterrupted=r,n.closeAll=u},{}],9:[function(t,e,n){"use strict";n.ms2min=function(t){return+(t/6e4).toFixed(1)},n.min2ms=function(t){return 6e4*t},n.sec2ms=function(t){return 1e3*t},n.ms2sec=function(t){return t/1e3}},{}]},{},[5]);