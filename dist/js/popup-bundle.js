!function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var d="function"==typeof require&&require;if(!a&&d)return d(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);var t=this;this._id=e,this._listeners={},this.send=function(e,t,n){chrome.runtime.sendMessage({id:this._id,name:e,value:t},n)},this.on=function(e,n){return this._listeners[e]=function(i,s,o){i.id!==t._id&&i.name===e&&o(n(i))},chrome.runtime.onMessage.addListener(this._listeners[e]),this},this.deregister=function(e){e in this._listeners&&(chrome.runtime.onMessage.removeListener(this._listeners[e]),delete this._listeners[e])}}t.exports=i},{}],2:[function(e,t,n){"use strict";function i(e,t){o(this,i),this._name=e,this._defaultValue=t,this.load()}function s(e,t){return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i)}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=i,s(i.prototype,{reset:function(){return this.save(this._defaultValue)},load:function(){var e=window.localStorage.getItem(this._name);return e?e:this.reset()},save:function(e){return window.localStorage.setItem(this._name,e),this.load()}})},{}],3:[function(e,t,n){"use strict";function i(e){a.src="audio/"+e+".ogg",a.volume=d.load(),a.play()}function s(){a.src=""}function o(e){return d.save(e)}var r=e("./Static.js");n.play=i,n.stop=s,n.setVolume=o;var a=new Audio(""),d=new r("volume","1");document.body.appendChild(a)},{"./Static.js":2}],4:[function(e,t,n){"use strict";function i(e){for(var t=e.target;"DIV"!==t.tagName;){if("A"===t.tagName){var n=t.href;s(n);break}t=t.parentNode}}function s(e){chrome.tabs.create({url:e,active:!0})}var o=(document.getElementById("wrapper"),document.getElementById("btn")),r=document.getElementById("options"),a=document.getElementById("session-input"),d=document.getElementById("session-apply-btn"),c=document.getElementById("session-restart"),l=document.getElementById("idle-input"),u=document.getElementById("idle-apply-btn"),m=document.getElementById("afk"),f=document.getElementById("sounds-btn"),v=document.getElementById("info"),p=document.getElementById("info-btn"),g=e("./Router")("frontend"),h=e("./utils"),I=(e("./audio"),e("./popup_timer"));!function(){var e=window.localStorage.getItem("state"),t=window.localStorage.getItem("session.period"),n=window.localStorage.getItem("idle.period"),i=+window.localStorage.getItem("volume"),s=+window.localStorage.getItem("session.remindStatus"),d=+window.localStorage.getItem("session.remindTime");"on"===e?(o.classList.add("app-btn-active"),s?I.showSession(d):I.showSession()):(o.classList.remove("app-btn-active"),r.classList.add("options-disabled")),i?f.classList.remove("disabled"):f.classList.add("disabled"),a.value=h.ms2min(t),l.value=h.ms2min(n)}(),o.addEventListener("click",function(e){this.classList.contains("app-btn-active")?(this.classList.remove("app-btn-active"),r.classList.add("options-disabled"),g.send("setStateOff")):(this.classList.add("app-btn-active"),r.classList.remove("options-disabled"),g.send("setStateOn"))}),c.addEventListener("click",function(){I.clearSession(),g.send("restartSession",null,function(e){})}),a.addEventListener("input",function(e){d.classList.remove("btn-hidden")}),d.addEventListener("click",function(){var e=+a.value,t=a.min,n=a.max;return!e||0>e?void(a.value=t):(t>e&&(a.value=e=t),e>n&&(a.value=e=n),e=h.min2ms(e),this.classList.add("btn-hidden"),void g.send("setSessionPeriod",e,function(){I.updateSession()}))}),l.addEventListener("input",function(e){u.classList.remove("btn-hidden")}),u.addEventListener("click",function(){var e=+l.value,t=l.min,n=l.max;return!e||0>e?void(l.value=t):(t>e&&(l.value=e=t),e>n&&(l.value=e=n),e=h.min2ms(e),this.classList.add("btn-hidden"),void g.send("setIdlePeriod",e,function(){I.updateIdle()}))}),f.addEventListener("click",function(e){var t=+window.localStorage.getItem("volume");t?(this.classList.add("disabled"),g.send("mute")):(this.classList.remove("disabled"),g.send("unmute"))}),document.body.addEventListener("selectstart",function(e){e.preventDefault()}),p.addEventListener("click",function(e){v.classList.toggle("active"),this.classList.toggle("active"),r.classList.toggle("hidden")}),v.addEventListener("click",i),g.on("sessionStarted",function(){I.clearIdle(),I.clearSession(),I.showSession()}).on("sessionStartedCustom",function(e){I.clearIdle(),I.clearSession(),I.showSession(e.value)}).on("sessionEnded",function(){I.clearSession()}).on("idleStarted",function(){I.clearSession(),I.clearIdle(),I.showIdle()}).on("idleEnded",function(){I.clearIdle()}).on("idle",function(){m.classList.add("shown")}).on("active",function(){m.classList.remove("shown")}).on("afk",function(e){I.showIdle(e.value)}).on("notAfk",function(){I.clearIdle()})},{"./Router":1,"./audio":3,"./popup_timer":5,"./utils":6}],5:[function(e,t,n){"use strict";function i(e){var t,n,i=+h.getItem("session.startDate");i&&(t=e||+h.getItem("session.period"),e&&g.classList.add("shown"),n=i+t,v.innerHTML=d(n),m=setInterval(function(){v.innerHTML=d(n)},1e3))}function s(){clearInterval(m),m=null,v.innerHTML=c(h.getItem("session.period")),g.classList.remove("shown")}function o(){s(),i()}function r(e){var t=e||Date.now(),n=+h.getItem("idle.period"),i=n+t;p.innerHTML=d(i),f=setInterval(function(){p.innerHTML=d(i)},1e3)}function a(){clearInterval(f),f=null,p.innerHTML=c(h.getItem("idle.period"))}function d(e){return c(e-Date.now())}function c(e){var t,n,i;return e=new Date(+e),t=e.getHours()-3,0===t?t="":t+=":",n=e.getMinutes(),10>n&&(n="0"+n),i=e.getSeconds(),10>i&&(i="0"+i),t+n+":"+i}function l(){m||(v.innerHTML=c(h.getItem("session.period")-new Date(0)))}function u(){f||(p.innerHTML=c(h.getItem("idle.period")-new Date(0)))}e("./utils");n.showSession=i,n.clearSession=s,n.showIdle=r,n.clearIdle=a,n.restartSession=o,n.updateSession=l,n.updateIdle=u;var m,f,v=document.getElementById("session-timer"),p=document.getElementById("idle-timer"),g=document.getElementById("remind"),h=window.localStorage;!function(){v.innerHTML=c(h.getItem("session.period")),p.innerHTML=c(h.getItem("idle.period"))}()},{"./utils":6}],6:[function(e,t,n){"use strict";t.exports={ms2min:function(e){return+(e/6e4).toFixed(1)},min2ms:function(e){return 6e4*e},sec2ms:function(e){return 1e3*e},ms2sec:function(e){return e/1e3}}},{}]},{},[4]);